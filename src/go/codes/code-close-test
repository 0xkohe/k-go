package main

func producer(ch chan int) {
  ch <- 1;
  ch <- 2;
  ch <- 3;
  close(ch);
};

func consumer(ch chan int) {
  for v := range ch {
    print(v);
  };
  print(999);
};

func testOk(ch chan int) {
  v, ok := <-ch;
  if ok {
    print(v);
    print(100);
  };
  v2, ok2 := <-ch;
  if ok2 {
    print(v2);
    print(200);
  } else {
    print(0);
    print(300);
  };
}

func main() {
  ch := make(chan int, 3);
  go producer(ch);
  go consumer(ch);

  ch2 := make(chan int);
  ch2 <- 42;
  close(ch2);
  go testOk(ch2);
}
